- > #DD-CN
	- #GPT MariaDB vs. MySQL
	  collapsed:: true
		- MariaDBÏôÄ MySQLÏùÄ Îëò Îã§ Ïò§Ìîà ÏÜåÏä§ Í¥ÄÍ≥ÑÌòï Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ Í¥ÄÎ¶¨ ÏãúÏä§ÌÖú(RDBMS)Ïù¥Î©∞, MySQLÏóêÏÑú ÌååÏÉùÎêú Ìè¨ÌÅ¨(fork)ÏûÖÎãàÎã§. Í∑∏Îü¨ÎÇò Î™á Í∞ÄÏßÄ Ï§ëÏöîÌïú Ï∞®Ïù¥Ï†êÏù¥ ÏûàÏäµÎãàÎã§.
		  
		  ---
		- ## **üîç¬†**
		- ## **Í∏∞Î≥∏ Í∞úÏöî**
		  
		  | 
		  **ÌäπÏßï**
		  | 
		  **MariaDB**
		  | 
		  **MySQL**
		  |
		  | ---- | ---- | ---- | ---- | ---- |
		  | 
		  **Ï∂úÏãú Ïó∞ÎèÑ**
		  | 
		  2009
		  | 
		  1995
		  |
		  | 
		  **Ï∞ΩÏãúÏûê**
		  | 
		  Monty Widenius (MySQL Í≥µÎèô Ï∞ΩÏóÖÏûê)
		  | 
		  Monty Widenius, David Axmark
		  |
		  | 
		  **ÎùºÏù¥ÏÑ†Ïä§**
		  | 
		  GPL v2 (100% Ïò§Ìîà ÏÜåÏä§)
		  | 
		  GPL v2, (Ïò§ÎùºÌÅ¥ ÏÜåÏú†, ÏùºÎ∂Ä ÏÉÅÏóÖ ÎùºÏù¥ÏÑ†Ïä§ Ï†úÍ≥µ)
		  |
		  | 
		  **Í∏∞ÏóÖ ÏÜåÏú†**
		  | 
		  MariaDB Foundation (ÎèÖÎ¶Ω Ïû¨Îã®)
		  | 
		  Oracle Corporation
		  |
		  | 
		  **Ìè¨ÌÅ¨ ÏãúÏ†ê**
		  | 
		  MySQL 5.5 Î≤ÑÏ†Ñ Ïù¥ÌõÑ ÎèÖÎ¶ΩÏ†ÅÏúºÎ°ú Í∞úÎ∞ú
		  | 
		  ÌòÑÏû¨ MySQL 8.x Î≤ÑÏ†ÑÍπåÏßÄ Í∞úÎ∞ú Ï§ë
		  |
		  
		  ---
		- ## **‚öôÔ∏è¬†**
		- ## **Í∏∞Îä• Ï∞®Ïù¥**
		  
		  | 
		  **Íµ¨Î∂Ñ**
		  | 
		  **MariaDB**
		  | 
		  **MySQL**
		  |
		  | ---- | ---- | ---- | ---- | ---- |
		  | 
		  **Ïä§ÌÜ†Î¶¨ÏßÄ ÏóîÏßÑ**
		  | 
		  Aria, XtraDB(InnoDB ÎåÄÏ≤¥), MyRocks, ColumnStore Îì±
		  | 
		  Í∏∞Î≥∏ InnoDB, NDB Cluster, MyISAM Îì±
		  |
		  | 
		  **Î≥µÏ†ú(Replication)**
		  | 
		  Î≥ëÎ†¨ Î≥µÏ†ú ÏßÄÏõê (Î©ÄÌã∞Ïä§Î†àÎìú Ïä¨Î†àÏù¥Î∏å), Galera Cluster Í∏∞Î≥∏ Ìè¨Ìï®
		  | 
		  MySQL 8.0Î∂ÄÌÑ∞ Î©ÄÌã∞Ïä§Î†àÎìú Ïä¨Î†àÏù¥Î∏å ÏßÄÏõê
		  |
		  | 
		  **JSON ÏßÄÏõê**
		  | 
		  Ï†úÌïúÏ†Å ÏßÄÏõê (Virtual Columns ÏÇ¨Ïö©)
		  | 
		  MySQL 5.7Î∂ÄÌÑ∞ JSON ÌÉÄÏûÖ Î≥∏Í≤© ÏßÄÏõê
		  |
		  | 
		  **Í∞ÄÏÉÅ Ïó¥(Virtual Columns)**
		  | 
		  ÏßÄÏõê (Í∞ÄÏÉÅ ÏÉùÏÑ± Î∞è Ï†ÄÏû• ÏÉùÏÑ± Îëò Îã§ ÏßÄÏõê)
		  | 
		  MySQL 5.7Î∂ÄÌÑ∞ ÏßÄÏõê
		  |
		  | 
		  **Windows Ìï®Ïàò**
		  | 
		  MariaDB 10.2Î∂ÄÌÑ∞ ÏßÄÏõê
		  | 
		  MySQL 8.0Î∂ÄÌÑ∞ ÏßÄÏõê
		  |
		  | 
		  **CTE Î∞è Recursive Query**
		  | 
		  MariaDB 10.2Î∂ÄÌÑ∞ ÏßÄÏõê
		  | 
		  MySQL 8.0Î∂ÄÌÑ∞ ÏßÄÏõê
		  |
		  | 
		  **Temporal Data**
		  | 
		  ÏôÑÏ†ÑÌïú Temporal Data ÏßÄÏõê (System Versioned Tables)
		  | 
		  MySQL 8.0ÏóêÏÑú ÌååÌä∏Î≥Ñ ÏßÄÏõê
		  |
		  | 
		  **Oracle PL/SQL Ìò∏ÌôòÏÑ±**
		  | 
		  ÏùºÎ∂Ä ÏßÄÏõê
		  | 
		  ÎØ∏ÏßÄÏõê
		  |
		  | 
		  **ÏïïÏ∂ï Î∞è ÏïîÌò∏Ìôî**
		  | 
		  ÏïïÏ∂ï ÌÖåÏù¥Î∏î Î∞è TDE(Transparent Data Encryption) ÏßÄÏõê
		  | 
		  MySQL Enterprise EditionÏóêÏÑúÎßå ÏôÑÏ†Ñ ÏßÄÏõê
		  |
		  
		  ---
		- ## **üöÄ¬†**
		- ## **ÏÑ±Îä• Î∞è ÏµúÏ†ÅÌôî**
		- **MariaDB**
			- Ïì∞Í∏∞ ÏÑ±Îä•Ïù¥ ÏÉÅÎåÄÏ†ÅÏúºÎ°ú Ïö∞ÏàòÌïòÎ©∞, Galera ClusterÎ•º ÌÜµÌï¥ Î©ÄÌã∞ ÎßàÏä§ÌÑ∞ Î≥µÏ†úÍ∞Ä Í∞ÄÎä•Ìï®.
			- Aria ÏóîÏßÑÏùÑ ÌÜµÌï¥ Î≥µÍµ¨ ÏãúÍ∞ÑÏù¥ MyISAMÎ≥¥Îã§ Îπ†Î¶Ñ.
			- ALTER TABLE Î™ÖÎ†πÏù¥ ÎπÑÏ∞®Îã®(Non-Blocking)ÏúºÎ°ú Ïã§ÌñâÎê®.
		- **MySQL**
			- InnoDB ÏµúÏ†ÅÌôîÍ∞Ä Ïûò ÎêòÏñ¥ ÏûàÏúºÎ©∞, ÏùΩÍ∏∞ ÏÑ±Îä•Ïù¥ Îõ∞Ïñ¥ÎÇ®.
			- ÏøºÎ¶¨ ÏµúÏ†ÅÌôî Î∞è Î≥ëÎ†¨ Ï≤òÎ¶¨ÏóêÏÑú ÏµúÏã† Î≤ÑÏ†ÑÏóêÏÑú ÌÅ∞ Í∞úÏÑ†Ïù¥ Ïù¥Î£®Ïñ¥Ïßê.
			- JSON Ï≤òÎ¶¨ÏôÄ CTE(Common Table Expressions)ÏóêÏÑú Îçî ÎÇòÏùÄ ÏÑ±Îä•ÏùÑ Î≥¥ÏûÑ.
			  
			  ---
		- ## **üîÑ¬†**
		- ## **Ìò∏ÌôòÏÑ±**
		- MySQL 5.5ÍπåÏßÄÎäî ÏôÑÏ†ÑÌûà Ìò∏ÌôòÎê®.
		- MySQL 5.7, 8.0ÏúºÎ°ú Í∞àÏàòÎ°ù SQL Íµ¨Î¨∏ Î∞è Ïä§ÌÜ†Î¶¨ÏßÄ ÏóîÏßÑÏóêÏÑú Ï∞®Ïù¥Í∞Ä Ïª§Ïßê.
		- ÏùºÎ∂Ä MySQL Ï†ÑÏö© Í∏∞Îä•(e.g., NDB Cluster)ÏùÄ MariaDBÏóêÏÑú ÏßÄÏõêÎêòÏßÄ ÏïäÏùå.
		  
		  ---
		- ## **ü§î¬†**
		- ## **Ïñ¥Îñ§ Í≤ÉÏùÑ ÏÑ†ÌÉùÌï¥Ïïº Ìï†Íπå?**
		- **Ïò§Ìîà ÏÜåÏä§ Ï§ÄÏàò Î∞è ÎùºÏù¥ÏÑ†Ïä§ Î¨∏Ï†ú** ‚Üí MariaDB
		- **ÏµúÏã† JSON Î∞è ÏúàÎèÑÏö∞ Ìï®Ïàò ÌôúÏö©** ‚Üí MySQL
		- **Î©ÄÌã∞ ÎßàÏä§ÌÑ∞ Î≥µÏ†ú Î∞è ÌÅ¥Îü¨Ïä§ÌÑ∞ÎßÅ** ‚Üí MariaDB
		- **Ïò§ÎùºÌÅ¥Í≥ºÏùò Ïó∞Îèô Î∞è ÏÉÅÏóÖ ÏßÄÏõê** ‚Üí MySQL
		- **Ïª§ÎÆ§ÎãàÌã∞ ÏßÄÏõê Î∞è Îπ†Î•∏ ÏóÖÎç∞Ïù¥Ìä∏ Ï£ºÍ∏∞** ‚Üí MariaDB
		  
		  ---
		  
		  Ï∂îÍ∞ÄÏ†ÅÏù∏ Î∂ÑÏÑùÏù¥ ÌïÑÏöîÌïòÍ±∞ÎÇò ÌäπÏ†ï ÏÉÅÌô©Ïóê ÎåÄÌïú ÏµúÏ†ÅÏùò ÏÑ†ÌÉùÏù¥ Í∂ÅÍ∏àÌïòÏã†Í∞ÄÏöî? üòä
	- TODO  #Django Ïû•Í≥† Î¶¨Î∑∞ÌïòÍ∏∞: 4Ïû• 8Ïû•, 12Ïû•
-
- #Cloud #Container
	- {{video https://youtu.be/g5GCsbjkzRM}}
-
- #SQLÎßàÏä§ÌÑ∞ÌÅ¥ÎûòÏä§ RECAP 3.0-3.9, 4.0-4.13
  collapsed:: true
	- SQLite Data Types
		- `TEXT`
		- `INTEGER`
		- `REAL`
		- `BLOB`
		- `NULL`
			- NULLÏùÄ ÌäπÎ≥ÑÌïú Í∞íÏúºÎ°ú, Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ÏóêÏÑúÎäî NULLÍ≥º Ïñ¥Îñ§ Í∞íÏùÑ ÏßÅÏ†ë ÎπÑÍµêÌï† Ïàò ÏóÜÏäµÎãàÎã§. = Ïó∞ÏÇ∞ÏûêÎäî Í∞í Í∞ÑÏùò ÎπÑÍµêÏóê ÏÇ¨Ïö©ÎêòÏßÄÎßå, NULLÏùÄ "Ïïå Ïàò ÏóÜÎäî Í∞í"ÏúºÎ°ú Í∞ÑÏ£ºÎêòÏñ¥ = Ïó∞ÏÇ∞ÏúºÎ°úÎäî ÎπÑÍµêÍ∞Ä Î∂àÍ∞ÄÎä•Ìï©ÎãàÎã§. WHERE director = NULLÏùÄ Ìï≠ÏÉÅ FALSEÎ°ú ÌèâÍ∞ÄÎê©ÎãàÎã§. Îî∞ÎùºÏÑú, NULL Í∞íÏùÄ IS NULL ÎòêÎäî IS NOT NULL Ïó∞ÏÇ∞ÏûêÎ•º ÏÇ¨Ïö©ÌïòÏó¨ ÎπÑÍµêÌï¥Ïïº Ìï©ÎãàÎã§.
			  1. WHERE director IS NULL; (O)
			  2. WHERE director = NULL; (X)
	- Data Definition Language
		- `CREATE TABLE`
		- `DROP TABLE`
		- ```sql
		  DROP TABLE movies;
		  
		  CREATE TABLE movies (
		  	title TEXT,
		  	released INTEGER, -- 1 , 2 , 3 ...
		  	overview TEXT,
		  	rating REAL,  -- 1.2 9.7 ...
		  	director TEXT,
		  	for_kids INTEGER -- 0 or 1
		  	-- poster BLOB
		  )	STRICT;
		  
		  INSERT INTO movies
		  	(title, rating)
		  VALUES
		  	('The Lord of The Rings', -10),
		      ('Dune: Part One', -10),
		      (9.8, 9.9),
		      (NULL, NULL);
		  ```
	- STRICT: Ïó¥ ÌÉÄÏûÖÍ≥º ÏùºÏπòÌïòÏßÄ ÏïäÏùÄ Îç∞Ïù¥ÌÑ∞ ÏûÖÎ†• ÏãúÎèÑÌï† Ïãú ÏóêÎü¨Î•º Î∞úÏÉùÏãúÌÇ®Îã§.
	- Constraints: Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ ÌÖåÏù¥Î∏îÏóê ÎßåÎìúÎäî Í∑úÏπôÏúºÎ°úÏç® Îç∞Ïù¥ÌÑ∞ Ïú†ÌòïÏùÑ ÏßÄÏ†ïÌïúÎã§.
	  collapsed:: true
		- `NOT NULL`
		- `DEFAULT`
		- `UNIQUE`
		- ```sql
		  CREATE TABLE movies (
		  title TEXT UNIQUE NOT NULL,
		  released INTEGER NOT NULL, -- 1,2,3 ...
		  overview TEXT NOT NULL,
		  rating REAL NOT NULL, -- 1.2, 9.7, ...
		  director TEXT,
		  for_kids INTEGER NOT NULL DEFAULT 0 -- 0 or 1
		  ) STRICT;
		  
		  INSERT INTO movies (title, rating, released, overview)
		  VALUES ('ÌÖåÏä§Ìä∏Ï§ë2', '8.5', 2, 'tes');
		  -- Îã§ÏùåÍ≥º Í∞ôÏù¥ Í∞íÏùÑ Ï∂îÍ∞ÄÌïòÎ©¥ ÏóêÎü¨Í∞Ä Î∞úÏÉùÌïòÎäî Ï§Ñ ÏïåÏïòÏßÄÎßå, Ï†ïÏÉÅÎèôÏûë ÌñàÏäµÎãàÎã§.
		  -- Ïù¥Ïú†Î•º Ï∞æÏïÑÎ≥¥Îãà Îã§ÏùåÍ≥º Í∞ôÏäµÎãàÎã§.
		  
		  --SQLite Í≥µÏãù Î¨∏ÏÑúÏóê Îî∞Î•¥Î©¥, `STRICT` Î™®ÎìúÏóêÏÑúÎèÑ Îã§ÏùåÏùÄ ÌóàÏö©Îê©ÎãàÎã§:
		  
		  -- > "a string literal that can be losslessly converted into a REAL or INTEGER value"
		  -- > Ï¶â, `"9.5"`Ï≤òÎüº **Ï†ïÌôïÌûà Î≥ÄÌôòÎê† Ïàò ÏûàÎäî Î¨∏ÏûêÏó¥ÏùÄ ÌóàÏö©**Îê† Ïàò ÏûàÏäµÎãàÎã§
		  ```sql
	- CHECK Constraint: Î†àÏΩîÎìúÏóê ÏûÖÎ†•ÎêòÎäî Í∞íÏùÑ ÌôïÏù∏ÌïòÎäî Ï°∞Í±¥ÏùÑ Ï∂îÍ∞ÄÌïúÎã§.
	  Ï°∞Í±¥Ïù¥ falseÏùº Í≤ΩÏö∞, ÌÖåÏù¥Î∏îÏóê Îç∞Ïù¥ÌÑ∞Í∞Ä Îì§Ïñ¥Í∞ÄÏßÄ ÏïäÍ≥†, Ï°∞Í±¥Ïù¥ trueÏùº Í≤ΩÏö∞ÏóêÎßå Ï†ïÏÉÅÏ†ÅÏúºÎ°ú ÌÖåÏù¥Î∏îÏóê Îç∞Ïù¥ÌÑ∞Í∞Ä Îì§Ïñ¥Í∞ëÎãàÎã§.
		- ```sql
		  -- SALARYÍ∞Ä 0Î≥¥Îã§ ÌÅ∞ Í∞íÏùÑ ÏûÖÎ†•ÌñàÏùÑ Í≤ΩÏö∞ÏóêÎßå Ï†ïÏÉÅÏ†ÅÏúºÎ°ú Îç∞Ïù¥ÌÑ∞Í∞Ä Îì§Ïñ¥Í∞ê
		  CREATE TABLE COMPANY3(
		  	id INT PRIMARY KEY NOT NULL,
		  	name TEXT NOT NULL,
		  	age INT NOT NULL,
		  	address CHAR(50),
		  	salary REAL CHECK(salary > 0)
		  );
		  ```
	- Primary Key:
		- Í∏∞Î≥∏ ÌÇ§Îäî Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ ÌÖåÏù¥Î∏îÏùò Í∞Å Ìñâ/Î†àÏΩîÎìúÎ•º Í≥†Ïú†ÌïòÍ≤å ÏãùÎ≥ÑÌïòÎäî ÌÖåÏù¥Î∏îÏùò ÌïÑÎìúÏûÖÎãàÎã§. Í∏∞Î≥∏ ÌÇ§ÏóêÎäî Í≥†Ïú†Ìïú Í∞íÏù¥ Ìè¨Ìï®ÎêòÏñ¥Ïïº Ìï©ÎãàÎã§. Í∏∞Î≥∏ ÌÇ§ Ïó¥ÏùÄ NULL Í∞íÏùÑ Í∞ÄÏßà Ïàò ÏóÜÏäµÎãàÎã§. Ïó¨Îü¨ ÌïÑÎìúÍ∞Ä Í∏∞Î≥∏ ÌÇ§Î°ú ÏÇ¨Ïö©ÎêòÎäî Í≤ΩÏö∞ Ïù¥Î•º Î≥µÌï© ÌÇ§ÎùºÍ≥† Ìï©ÎãàÎã§.
		- ÌäπÏßï
			- Î∂àÎ≥ÄÏÑ± (Ìï¥Îãπ Í∞íÏù¥ Î≥ÄÍ≤ΩÎêòÏßÄ ÏïäÏïÑÏïº Ìï®)
			- Í≥†Ïú†Ìï® (Ìï¥Îãπ Í∞íÏùÄ Ïú†ÏùºÌï¥Ïïº ÌïòÎ©∞, ÎèôÏùºÌïú Í∞íÏù¥ Í∞ÄÏßÑ Í≤ÉÏù¥ Ï°¥Ïû¨ÌïòÏßÄ ÏïäÏïÑÏïº Ìï®)
		- Ïú†Ìòï
			- natural : ÌÖåÏù¥Î∏îÏóêÏÑú ÏûêÏó∞Ï†ÅÏúºÎ°ú ÌååÏÉùÎê®, ÌÖåÏù¥Î∏îÏùò Îç∞Ïù¥ÌÑ∞ÏôÄ ÎÖºÎ¶¨Ï†ÅÏù∏ Í¥ÄÍ≥ÑÏóê ÏûàÏùå
			- surrogate : Í≥†ÏùòÏ†ÅÏúºÎ°ú ÎßåÎì† ÌÇ§, Ïò§ÏßÅ ÌñâÏùò Ï∂îÏ†ÅÏóê ÏùòÏùòÎ•º Îë†
				- AUTOINCREMENT:
			- ```sql
			    movie_id INTEGER PRIMARY KEY AUTOINCREMENT -- surrogate key
			    title TEXT PRIMARY KEY UNIQUE NOT NULL -- natural key
			  ```
		- QnA: PRIMARY KEYÏôÄ UNIQUEÏùò Ï∞®Ïù¥Ï†êÏùÄ Î≠îÍ∞ÄÏöî?? UNIQUEÎèÑ PRIMARY KEYÏ≤òÎüº Í≥†Ïú†Ìï¥ÏïºÌïòÏßÄÎßå Î≥ÄÍ≤ΩÏù¥ Í∞ÄÎä•ÌïòÎã§Îäî Ï†ïÎèÑÏùò Ï∞®Ïù¥ÏùºÍπåÏöî?
			- ==@sungok1025==¬†PRIMARY KEYÏôÄ UNIQUEÎäî Îëò Îã§ Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ÏóêÏÑú Í≥†Ïú†ÏÑ±ÏùÑ Î≥¥Ïû•ÌïòÎäî Ï†úÏïΩ Ï°∞Í±¥Ïù¥ÏßÄÎßå, Î™á Í∞ÄÏßÄ Ï§ëÏöîÌïú Ï∞®Ïù¥Ï†êÏù¥ ÏûàÏäµÎãàÎã§:
			  
			  1. NULL ÌóàÏö© Ïó¨Î∂Ä:
				- PRIMARY KEY: NULL Í∞íÏùÑ ÌóàÏö©ÌïòÏßÄ ÏïäÏäµÎãàÎã§.
				- UNIQUE: NULL Í∞íÏùÑ ÌóàÏö©Ìï† Ïàò ÏûàÏäµÎãàÎã§ (ÎåÄÎ∂ÄÎ∂ÑÏùò Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ÏóêÏÑú).
			- 2. ÌÖåÏù¥Î∏îÎãπ Í∞úÏàò:
				- PRIMARY KEY: ÌÖåÏù¥Î∏îÎãπ ÌïòÎÇòÎßå Í∞ÄÏßà Ïàò ÏûàÏäµÎãàÎã§.
				- UNIQUE: ÌÖåÏù¥Î∏îÏóê Ïó¨Îü¨ Í∞úÏùò UNIQUE Ï†úÏïΩ Ï°∞Í±¥ÏùÑ Í∞ÄÏßà Ïàò ÏûàÏäµÎãàÎã§.
			- 3. Ïù∏Îç±Ïä§ ÏÉùÏÑ±:
				- PRIMARY KEY: ÏûêÎèôÏúºÎ°ú ÌÅ¥Îü¨Ïä§ÌÑ∞Îìú Ïù∏Îç±Ïä§Î•º ÏÉùÏÑ±Ìï©ÎãàÎã§ (ÎåÄÎ∂ÄÎ∂ÑÏùò DBMSÏóêÏÑú).
				- UNIQUE: ÎÖº-ÌÅ¥Îü¨Ïä§ÌÑ∞Îìú Ïù∏Îç±Ïä§Î•º ÏÉùÏÑ±Ìï©ÎãàÎã§.
			- 4. Î†àÏΩîÎìú ÏãùÎ≥Ñ:
				- PRIMARY KEY: ÌÖåÏù¥Î∏îÏùò Í∞Å Î†àÏΩîÎìúÎ•º Í≥†Ïú†ÌïòÍ≤å ÏãùÎ≥ÑÌïòÎäî Îç∞ ÏÇ¨Ïö©Îê©ÎãàÎã§.
				- UNIQUE: ÌäπÏ†ï Ïó¥Ïùò Í∞íÏù¥ Í≥†Ïú†Ìï®ÏùÑ Î≥¥Ïû•ÌïòÏßÄÎßå, Î∞òÎìúÏãú Î†àÏΩîÎìú ÏãùÎ≥ÑÏö©ÏùÄ ÏïÑÎãôÎãàÎã§.
			- 5. Ïô∏Îûò ÌÇ§ Ï∞∏Ï°∞:
				- PRIMARY KEY: Îã§Î•∏ ÌÖåÏù¥Î∏îÏùò Ïô∏Îûò ÌÇ§Í∞Ä Ï∞∏Ï°∞Ìï† Ïàò ÏûàÏäµÎãàÎã§.
				- UNIQUE: Ïô∏Îûò ÌÇ§Ïùò Ï∞∏Ï°∞ ÎåÄÏÉÅÏù¥ Îê† Ïàò ÏûàÏßÄÎßå, PRIMARY KEYÎßåÌÅº ÏùºÎ∞òÏ†ÅÏù¥ÏßÄ ÏïäÏäµÎãàÎã§.
			- 6. Î≥ÄÍ≤Ω Í∞ÄÎä•ÏÑ±:
				- PRIMARY KEY: ÏùºÎ∞òÏ†ÅÏúºÎ°ú Î≥ÄÍ≤ΩÏùÑ Í∂åÏû•ÌïòÏßÄ ÏïäÏäµÎãàÎã§ (Î≥ÄÍ≤Ω Ïãú Îã§Î•∏ ÌÖåÏù¥Î∏îÏùò Ï∞∏Ï°∞ Î¨¥Í≤∞ÏÑ±Ïóê ÏòÅÌñ•ÏùÑ Ï§Ñ Ïàò ÏûàÏùå).
				- UNIQUE: PRIMARY KEYÏóê ÎπÑÌï¥ ÏÉÅÎåÄÏ†ÅÏúºÎ°ú Î≥ÄÍ≤ΩÏù¥ Ïö©Ïù¥Ìï† Ïàò ÏûàÏßÄÎßå, Ïó¨Ï†ÑÌûà Ï£ºÏùòÍ∞Ä ÌïÑÏöîÌï©ÎãàÎã§.
			- Í≤∞Î°†Ï†ÅÏúºÎ°ú, UNIQUEÍ∞Ä PRIMARY KEYÎ≥¥Îã§ Î≥ÄÍ≤ΩÏù¥ Îçî ÏâΩÎã§Í≥† Î≥º ÏàòÎäî ÏûàÏßÄÎßå, Ïù¥Îäî Ï£ºÏöî Ï∞®Ïù¥Ï†ê Ï§ë ÌïòÎÇòÏùº ÎøêÏûÖÎãàÎã§. Îëê Ï†úÏïΩ Ï°∞Í±¥Ïùò Ïó≠Ìï†Í≥º ÌäπÏÑ±ÏóêÎäî Îçî ÎßéÏùÄ Ï∞®Ïù¥Í∞Ä ÏûàÏäµÎãàÎã§.
	- Data Manipulation Language
		- Î≤îÏ£º
			- update Î™ÖÎ†π: INSERT INTO VALUES, UPDATE, DELETE
			- query Î™ÖÎ†π: SELECT
		- `INSERT INTO VALUES`
			- Í∞íÏùÑ ÏßÄÏ†ïÌïòÏßÄ ÏïäÏùÄ Ïó¥ÏùÄ ÎîîÌè¥Ìä∏ Í∞íÏúºÎ°ú Ï±ÑÏõåÏßÄÍ±∞ÎÇò ÎîîÌè¥Ìä∏Í∞Ä ÏßÄÏ†ïÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ NULL Î°ú Ï±ÑÏõåÏßÑÎã§.
		- `UPDATE`
			- SQLite UPDATE ÏøºÎ¶¨Îäî ÌÖåÏù¥Î∏îÏùò Í∏∞Ï°¥ Î†àÏΩîÎìúÎ•º ÏàòÏ†ïÌïòÎäî Îç∞ ÏÇ¨Ïö©Îê©ÎãàÎã§.
			  UPDATE ÏøºÎ¶¨ÏôÄ Ìï®Íªò WHERE Ï†àÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ ÏÑ†ÌÉùÌïú ÌñâÏùÑ ÏóÖÎç∞Ïù¥Ìä∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.
			  Í∑∏Î†áÏßÄ ÏïäÏúºÎ©¥ Î™®Îì† ÌñâÏù¥ ÏóÖÎç∞Ïù¥Ìä∏Îê©ÎãàÎã§.
			  ex: UPDATE movies SET rating = rating + 1 WHERE title = 'Dune';
			  https://www.sqlite.org/lang_update.html
		- `DELETE`
			- SQLite DELETE ÏøºÎ¶¨Îäî ÌÖåÏù¥Î∏îÏóêÏÑú Í∏∞Ï°¥ Î†àÏΩîÎìúÎ•º ÏÇ≠Ï†úÌïòÎäî Îç∞ ÏÇ¨Ïö©Îê©ÎãàÎã§.
			  DELETE ÏøºÎ¶¨ÏôÄ Ìï®Íªò WHERE Ï†àÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ ÏÑ†ÌÉùÌïú ÌñâÏùÑ ÏÇ≠Ï†úÌï† Ïàò ÏûàÏäµÎãàÎã§.
			  Í∑∏Î†áÏßÄ ÏïäÏúºÎ©¥ Î™®Îì† Î†àÏΩîÎìúÍ∞Ä ÏÇ≠Ï†úÎê©ÎãàÎã§.
			  ex: DELETE FROM movies WHERE movie_id = 2;
			  https://www.sqlite.org/lang_delete.html
		- `SELECT`
			- ```sql
			  SELECT 
			      release_date,                         
			      ROUND(AVG(rating), 2) AS avg_rating    -- 5Ô∏è‚É£ SELECT
			  FROM
			      movies                                 -- 1Ô∏è‚É£ FROM
			  WHERE
			      rating IS NOT NULL 
			      AND release_date IS NOT NULL           -- 2Ô∏è‚É£ WHERE
			  GROUP BY
			      release_date                           -- 3Ô∏è‚É£ GROUP BY
			  HAVING 
			      avg_rating > 6                         -- 4Ô∏è‚É£ HAVING
			  ORDER BY
			      avg_rating DESC                        -- 6Ô∏è‚É£ ORDER BY
			  LIMIT 10 OFFSET 5;                         -- 7Ô∏è‚É£ LIMIT & OFFSET
			  ```
			- üìå Ïã§Ìñâ ÏàúÏÑúÎåÄÎ°ú Î≥¥Î©¥ Îã§ÏùåÍ≥º Í∞ôÏäµÎãàÎã§:
				- 1. FROM: movies **ÌÖåÏù¥Î∏îÏóêÏÑú Îç∞Ïù¥ÌÑ∞Î•º Í∞ÄÏ†∏Ïòµ**ÎãàÎã§.
				- 2. WHERE: ratingÍ≥º release_dateÍ∞Ä NULLÏù¥ ÏïÑÎãå ÌñâÎßå **ÌïÑÌÑ∞ÎßÅ**Ìï©ÎãàÎã§.
				- 3. GROUP BY: release_dateÎ≥ÑÎ°ú Îç∞Ïù¥ÌÑ∞Î•º **Í∑∏Î£πÌôî**Ìï©ÎãàÎã§.
				- 4. HAVING: Í∑∏Î£πÌôîÎêú Îç∞Ïù¥ÌÑ∞ Ï§ë ÌèâÍ∑† ÌèâÏ†ê(avg_rating)Ïù¥ 6ÏùÑ Ï¥àÍ≥ºÌïòÎäî Í≤ÉÎßå **ÌïÑÌÑ∞ÎßÅ**Ìï©ÎãàÎã§.
				- 5.	SELECT: ÌïÑÏöîÌïú Ïª¨Îüº(release_date, avg_rating)ÏùÑ ÏÑ†ÌÉùÌïòÍ≥† **ÏßëÍ≥Ñ Ìï®Ïàò**(AVG)Î•º Í≥ÑÏÇ∞Ìï©ÎãàÎã§.
				- 6.	ORDER BY: avg_ratingÏùÑ Í∏∞Ï§ÄÏúºÎ°ú ÎÇ¥Î¶ºÏ∞®Ïàú Ï†ïÎ†¨Ìï©ÎãàÎã§.
				- 7.	LIMIT & OFFSET: 5Í∞úÎ•º Í±¥ÎÑàÎõ∞Í≥†, ÏµúÎåÄ 10Í∞úÏùò Í≤∞Í≥ºÎßå Î∞òÌôòÌï©ÎãàÎã§.
- #SQLÎßàÏä§ÌÑ∞ÌÅ¥ÎûòÏä§ 5. Subqueries and CTEs
  collapsed:: true
	- 4.14 Super Practice Part One
	  collapsed:: true
		- ÏßëÍ≥ÑÌï®Ïàò https://www.sqlite.org/lang_aggfunc.html
		- What is the average of each director*?
		  logseq.order-list-type:: number
			- ```sql
			  SELECT
			      director,
			      AVG(rating) -- AS avg_rating
			  FROM
			      movies
			  WHERE
			      rating IS NOT NULL
			      AND director IS NOT NULL
			  GROUP BY
			      director;
			  -- ORDER BY avg_rating DESC;
			  ```
		- 5Ìé∏ Ïù¥ÏÉÅÏùò ÏòÅÌôîÎ•º Í∞ÄÏßÑ Í∞Å Í∞êÎèÖÏùò ÌèâÍ∑† ÌèâÏ†ê
		  logseq.order-list-type:: number
			- 5Ìé∏ Ïù¥ÏÉÅÏùò ÏòÅÌôîÎ•º Í∞ÄÏ°åÎã§. Ïù¥ÎØ∏ Í∑∏Î£πÌôîÎêú ÏÉÅÌÉúÏóêÏÑú ÌèâÍ∞ÄÍ∞Ä Ïù¥Î§ÑÏ†∏Ïïº Ìï†Í±∞Ïïº.
			- ```sql
			  SELECT
			      director,
			      AVG(rating) AS avg_rating
			  FROM
			      movies
			  WHERE
			      rating IS NOT NULL
			      AND director IS NOT NULL
			  GROUP BY
			      director
			  HAVING
			      COUNT(rating) >= 5
			  ORDER BY
			      avg_rating DESC;
			  ```
			- ```sql
			  SELECT
			      director,
			      ROUND(AVG(rating), 3) AS avg_rating
			  FROM
			      movies
			  WHERE
			      rating IS NOT NULL
			      AND director IS NOT NULL
			  GROUP BY
			      director
			  HAVING
			      COUNT(*) >= 5
			  ORDER BY
			      avg_rating DESC
			  
			  ```
		- Í∞Å Ïû•Î•¥Ïóê Î™á Ìé∏Ïùò ÏòÅÌôîÍ∞Ä ÏûàÎÇòÏöî,
		  logseq.order-list-type:: number
			- Îç∞Ïù¥ÌÑ∞ Ï§ëÎ≥µ Î¨∏Ï†úÎäî Îã§Ïùå ÏÑπÏÖòÏóêÏÑú Ìï¥Í≤∞ÌïòÎèÑÎ°ù Ìï®.
			- ![image.png](../assets/image_1747622357392_0.png)
		- 6Ï†ê Ïù¥ÏÉÅ Í∞ÄÏû• ÌùîÌïú
		  logseq.order-list-type:: number
			- ```sql
			  SELECT
			      rating,
			      COUNT(*) AS total_ratings
			  FROM
			       movies
			  WHERE
			      rating > 6
			  GROUP BY
			      rating
			  ORDER BY
			      total_ratings DESC;
			  ```
	- 4.15 Super Practice 2, 3
	  collapsed:: true
		- ```sql
		  -- 6. ÌãÄ!!!!!
		  
		  SELECT
		      director,
		     	sum(revenue) - sum(budget) AS profit
		  --    (revenue - budget) AS profit
		  FROM
		       movies
		  WHERE
		      director IS NOT NULL
		      AND revenue IS NOT NULL
		      AND budget IS NOT NULL
		  GROUP BY 
		      director
		  ORDER BY
		      profit DESC;
		  
		  -- 9.
		  SELECT
		  --    FLOOR(release_date * 0.1) * 10 AS release_decade,
		      (release_date / 10) * 10 AS release_decade, -- SELECT Î¨∏Ïóê ÏûàÎäî ÏöîÏÜåÎ°ú GROUP BY Í∞ÄÎä•.
		      ROUND(AVG(runtime), 2) AS avg_runtime
		  FROM
		       movies
		  WHERE
		      release_date IS NOT NULL
		      AND runtime IS NOT NULL
		  GROUP BY
		      release_decade;
		  ```
	- 4.16 Super Practice 3
	  collapsed:: true
		- ```sql
		  -- 1.
		  SELECT
		      release_date,
		      MAX(rating) - MIN(rating) AS diff
		  FROM
		       movies
		  WHERE
		      release_date IS NOT NULL
		      AND rating IS NOT NULL
		  --    AND rating BETWEEN 2 AND 9.5
		  GROUP BY
		      release_date
		  ORDER BY 
		      diff DESC
		  LIMIT 5;
		  
		  -- 2.
		  SELECT 
		      director,
		      COUNT(*) AS total_movies
		  FROM 
		      movies
		  WHERE 
		      director IS NOT NULL
		      AND runtime IS NOT NULL
		  GROUP BY
		      director
		  HAVING
		  	MIN(runtime) >= 120 -- Ï°∞Í±¥ÏùÑ ÌÜµÍ≥ºÌïú Í∞êÎèÖÎßå ÎÇ®ÎäîÎã§.
		  --    NOT runtime > 120 ÌãÄ!!!!
		  	
		  ORDER BY
		      total_movies DESC;
		      
		  -- 3.
		  SELECT 
		      ROUND((SUM(CASE WHEN rating > 8.0 THEN 1 END) * 100.0) / COUNT(*), 2) AS percentage_above_8
		      -- ELSE NULL ÏùÑ Ï∂îÍ∞ÄÌïòÏßÄ ÏïäÏïÑÎèÑ NULL ÏùÑ Î∞òÌôò.
		  FROM 
		      movies
		  WHERE 
		      rating IS NOT NULL;
		  
		  -- 4. COUNT, SUM Îëò Îã§ Ïì∏ÏàòÏûàÏßÄÎßå Ïó¨Í∏∞ÏÑúÎäî COUNTÍ∞Ä Îçî Ï†ÅÏ†àÌïú Í≤É Í∞ôÏùå.
		  SELECT
		      director,
		      --SUM(CASE WHEN rating > 7.0 THEN 1 ELSE 0 END) * 100 / COUNT(*) AS ratio
		      COUNT(CASE WHEN rating > 7.0 THEN 1.0 END) * 100 / COUNT(*) AS '%'
		  FROM 
		      movies
		  WHERE
		      director IS NOT NULL
		      AND rating IS NOT NULL
		  GROUP BY 
		      director;
		      
		  -- 5. 
		  SELECT
		      CASE WHEN runtime < 90 THEN 
		          'Short'
		      -- WHEN runtime >= 90 AND runtime <= 120 THEN
		      WHEN runtime BETWEEN 90 AND 120 THEN
		          'Medium'
		      WHEN runtime > 120 THEN
		          'Long'
		      END AS runtime_category,
		      COUNT(*) AS total_movies
		  FROM
		      movies
		  WHERE
		      runtime IS NOT NULL
		  GROUP BY
		      runtime_category;
		  ORDER BY total_movies DESC;
		  
		  -- 6. flop ÏàòÏùµÎ≥¥Îã§ ÎπÑÏö©Ïù¥ Îçî ÎßéÏù¥ ÎÇòÍ∞ÄÎäî ÏòÅÌôî
		  SELECT
		  --    CASE WHEN (revenue - budget) < 0 THEN 
		      CASE WHEN revenue < budget THEN 
		          'Flop'
		      ELSE
		          'Success'
		  --    END AS 'is_flop',
		      END AS flop_or_not,
		      COUNT(*) AS total_movies
		  FROM
		      movies
		  WHERE
		      budget IS NOT NULL
		      AND revenue IS NOT NULL
		  GROUP BY
		      flop_or_not 
		  ```
	- 4.17 Views (DDL)
	  collapsed:: true
		- ViewÎäî ÏøºÎ¶¨Ïùò Îã®Ï∂ïÏñ¥ Í∞ôÏùÄ Í∏∞Îä•
		- ÏøºÎ¶¨Î•º Í∏∞ÏñµÌïòÍ∏∞ Ïâ¨Ïö¥ Ïù¥Î¶ÑÏúºÎ°ú Ìå®ÌÇ§ÏßïÌï¥ÏÑú Í≥ÑÏÜç ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎèÑÎ°ù Ìï¥Ï§ÄÎã§.
		- Í∞ÄÎÅî ÏûêÏ£º ÏÇ¨Ïö©ÌïòÍ≤å Îê† ÏøºÎ¶¨Í∞Ä ÏÉùÍ∏∞Í∏∞ ÎïåÎ¨∏Ïóê...
		- viewÎ•º ÏÇ¨Ïö©Ìï¥ÏÑú ÏøºÎ¶¨Î•º Ìå®ÌÇ§Ïßï Ìï† Ïàò ÏûàÎã§.
		- ```sql
		  CREATE VIEW v_flop_or_not AS SELECT
		  --    CASE WHEN (revenue - budget) < 0 THEN 
		      CASE WHEN revenue < budget THEN 
		          'Flop'
		      ELSE
		          'Success'
		  --    END AS 'is_flop',
		      END AS flop_or_not,
		      COUNT(*) AS total_movies
		  FROM
		      movies
		  WHERE
		      budget IS NOT NULL
		      AND revenue IS NOT NULL
		  GROUP BY
		      flop_or_not 
		  ```
		- ÏÑ±Í≥µÌñàÎã§Î©¥ Í≤∞Í≥ºÎ°úÏÑú ÏøºÎ¶¨Í∞Ä Ïã§ÌñâÎêòÏßÄ ÏïäÍ≥† 'OK'Í∞Ä ÏΩòÏÜîÏóê Ï∂úÎ†•Îê†Í±∞Ïïº.
		- ```sql
		  SELECT * FROM v_flop_or_not;
		  DROP VIEW v_flop_or_not;
		  ```
		- viewÎ•º ÌÖåÏù¥Î∏î Ï≤òÎüº ÏÇ¨Ïö©ÌïòÍ≥† ÏûàÎäî Í±∞ÏûÑ..!  ÏûëÏÑ±Ìïú SQL Î™ÖÎ†πÏñ¥Îì§Ïù¥ ViewÏóê Ï†ÄÏû•ÎêòÎäî Í≤ÉÏûÑ.
		- viewÎ•º Ï°∞ÌöåÌï† Îïå ÎßàÎã§ viewÏóê ÏûàÎäî ÏΩîÎìúÍ∞Ä Ïã§Ï†úÎ°ú Ïã§ÌñâÎêòÎäî Í≤ÉÏûÑ.
	- 5.1 Independent Subqueries
	  collapsed:: true
		- **Subquery**
			- subqueryÎäî Îã§Î•∏ Î™ÖÎ†πÎ¨∏Ïóê Ï§ëÏ≤©Îêú SELECT Î™ÖÎ†πÎ¨∏. (Îã§Î•∏ ÏøºÎ¶¨Ïùò ÎÇ¥Î∂ÄÏóê ÏûàÎäî ÏøºÎ¶¨)
			- subqueryÎ•º Î¨∂ÏúºÎ†§Î©¥ Í¥ÑÌò∏ () ÏåçÏùÑ ÏÇ¨Ïö©.
		- **Independent Subqueries**
			- ÌòÑÏû¨ Ïã§Ìñâ Ï§ëÏù∏ ÌñâÏóê Îî∞Îùº Í∞íÏù¥ Î∞îÎÄåÏßÄ ÏïäÎäî ÎèÖÎ¶ΩÏ†ÅÏù∏ Subquery
			- > ÏúÑÏùò ÏΩîÎìúÏóêÏÑú Ï§ëÏ≤©ÎêòÏñ¥ Îì§Ïñ¥Í∞ÄÎäî ÏøºÎ¶¨Î•º SUB Query ÎùºÍ≥† Ìï®. Îã§Îßå Ìï¥Îãπ ÏøºÎ¶¨Í∞Ä Î™®Îì† rowÏùò revenueÍ∞Ä 1000 Ïù¥ÏÉÅÏù∏Í∞ÄÎ•º Í≥ÑÏÇ∞Ìï† ÎïåÎßàÎã§ Î∞òÎ≥µÏ†ÅÏúºÎ°ú ÏàòÌñâÎêòÎ©¥ Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§Ïùò ÌçºÌè¨Î®ºÏä§Í∞Ä Îñ®Ïñ¥Ïßà ÏàòÎèÑ ÏûàÎã§Îäî ÏÉùÍ∞ÅÏùÑ Ìï† Ïàò ÏûàÎäîÎç∞, ÎîîÎπÑ ÏûêÏ≤¥Ïùò ÏøºÎ¶¨ ÌîåÎûòÎÑàÍ∞Ä Ïù¥Î•º ÏµúÏ†ÅÌôîÌïòÏó¨ ÏÉÅÏàòÎ°ú Ï≤òÎ¶¨ÌïòÍ∏∞ ÎïåÎ¨∏Ïóê Í±±Ï†ïÌï† ÌïÑÏöîÎäî ÏóÜÎã§.
		- > -- List movies with a (rating|revenue) higher than¬†the¬†average (rating|revenue) of all movies  .
			- ```sql
			  SELECT AVG(rating) FROM movies;
			  SELECT COUNT(*) FROM movies WHERE rating > 5.734669125807575;
			  ```
			- ```sql
			  SELECT
			  	COUNT(*)
			  FROM
			  	movies
			  WHERE
			  	revenue > 1000
			  	AND rating > (SELECT
			  						AVG(rating)
			                  	FROM
			                  		movies);
			  ```
				- whereÏ†àÏùÄ Î™®Îì† Ïó¥Ïóê ÎåÄÌï¥ Ìï¥Îãπ Ï°∞Í±¥ÏùÑ Ï≤¥ÌÅ¨ÌïúÎã§.
				- ÌòÑÏû¨ Ï≤¥ÌÅ¨ÌïòÍ≥† ÏûàÎäî Ïó¥Ïù¥ Î¨¥ÏóáÏù∏ÏßÄÏóê Îî∞Îùº Ïù¥ ÏÑúÎ∏åÏøºÎ¶¨Ïùò Í≤∞Í¥èÍ∞íÏù¥ Î≥ÄÌïòÏßÄ ÏïäÎäîÎã§.
				- Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§Í∞Ä ÏïåÏïÑÏÑú Ïù¥ ÏøºÎ¶¨Î•º Îî± ÌïúÎ≤à Ïã§ÌñâÏãúÌÇ§Í≥† Í∞íÏùÑ ÏñªÍ≤åÎê†Í±∞ÏûÑ.
				- ÏòÅÌôîÏùò ÌèâÍ∑† ÌèâÏ†êÏùÄ Ïñ¥Îñ§ Ïó¥ÏóêÏÑú Ïã§ÌñâÌïòÎçîÎùºÎèÑ Î≥ÄÌïòÏßÄ ÏïäÏïÑ. Ïù¥Í≤å Î∞îÎ°ú independent subqueryÎùºÍ≥† Î∂àÎ¶¨Îäî Ïù¥Ïú†ÏûÑ.
		- > -- List movies with a rating higher than¬†the¬†average rating of movies in their genre.
	- 5.2 CTEs
	  collapsed:: true
		- CTEÎäî ÎòëÍ∞ôÏùÄ Î™ÖÎ†πÏùÑ Ïã§ÌñâÌïò„Ö°„Ñ¥ Í≥µÌÜµÏùò ÏøºÎ¶¨Î•º Ïû¨ÏÇ¨Ïö©ÌïòÍ∏∞ ÏúÑÌï¥ ÎßåÎì§Ïñ¥ÏßÑ Í≤É
		- CTE(Common Table Expressions, Í≥µÌÜµ ÌÖåÏù¥Î∏î ÌëúÌòÑÏãù)Î•º ÏÇ¨Ïö©ÌïòÎ©¥ Independent SubqueriesÎ•º Ïû¨ÏÇ¨Ïö©Ìï† Ïàò ÏûàÍ≤å ÎêúÎã§.
		- Ïôú Ïû¨ÏÇ¨Ïö©ÌïòÍ≥† Ïã∂ÏùÄÍ±∏Íπå?
			- Ïù¥ Í≤∞Í≥ºÍ∞íÏúºÎ°ú Îç∞Ïù¥ÌÑ∞Î•º ÌïÑÌÑ∞ÎßÅÌïòÍ≥† Ïã∂ÏùÑÎøêÎßå ÏïÑÎãàÎùº Îç∞Ïù¥ÌÑ∞ÏóêÏÑú Ïù¥ Í∞íÏùÑ ÏãúÍ∞ÅÌôîÌïòÍ≥† Ïã∂Í∏∞ ÎïåÎ¨∏Ïù¥Îã§.
			- ```sql
			  -- WITHOUT CTE.
			  SELECT 
			      title,
			      director,
			      revenue,
			      (
			          SELECT
			              AVG(revenue)
			          FROM 
			              movies) avg_revenue
			  FROM
			      movies
			  WHERE
			      revenue > (
			          SELECT
			              AVG(revenue)
			          FROM
			              movies movies);
			  
			  -- USING CTE.
			  WITH avg_revenue_cte AS (
			      SELECT
			          AVG(revenue) AS avg_revenue
			      FROM
			          movies
			  )
			  -- ), avg_rating_cte AS ( ... )
			  SELECT
			      title,
			      director,
			      revenue,
			      ROUND((SELECT * FROM avg_revenue_cte), 0) AS avg_revenue
			  --    ROUND((SELECT avg_revenue FROM avg_revenue_cte), 0) AS avg_revenue
			  FROM
			      movies
			  WHERE
			      revenue > (SELECT * FROM avg_revenue_cte);
			  
			  --    revenue > (SELECT avg_revenue FROM avg_revenue_cte);
			  -- Find¬†the¬†directors with a career revenue higher than¬†the¬†average revenue of all directors.
			  -- Find¬†the¬†movies with a rating higher than¬†the¬†average rating of movies released in¬†the¬†same year.
			  -- Make a super slow query and optimize it as much as we can with what we know so far.
			  ```
		- ÏùºÏ¢ÖÏùò view Í∞ôÏùÄ ÎØ∏Îãà ÌÖåÏù¥Î∏îÏùÑ ÎßåÎìúÎäî Í≤ÉÍ≥º Í∞ôÎã§Í≥† Î≥º Ïàò ÏûàÎã§. ÌïòÏßÄÎßå ÏòÅÍµ¨Ï†ÅÏù¥ÏßÑ ÏïäÎã§. ÏøºÎ¶¨Ïùò contextÏóêÏÑúÎßå ÏÉùÏÑ±ÎêòÍ≥† Î≤ÑÎ†§ÏßÄÍ∏∞ ÎïåÎ¨∏.
		- CTE ÎÇ¥Î∂ÄÏóê ÏÑúÎ∏åÏøºÎ¶¨Î•º ÏûëÏÑ±Ìï¥ÏÑú Ïû¨ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎã§Îäî Í≤ÉÏùÑ Î∞∞Ïõ†Îã§.
		- CTEÎäî selectÎ¨∏ Ïù¥Ï†ÑÏóê Ï†ïÏùò ÎêòÏñ¥Ïïº ÌïúÎã§.
		-
	- 5.3 Correlated Subqueries
		- Î©îÏù∏ ÏøºÎ¶¨Í∞Ä Ïñ¥Îñ§ Ïó¥ÏóêÏÑú Ïã§ÌñâÏ§ëÏù∏ÏßÄÏóê Îî∞Îùº Í≤∞Í≥ºÍ∞íÏù¥ Îã¨ÎùºÏßÑÎã§.
		- ```sql
		  -- ÌïòÎìúÏΩîÎî©Îêú independen subquery
		  SELECT 
		      title,
		      director,
		      rating
		  FROM
		      movies
		  WHERE
		      rating > (
		          SELECT
		              AVG(rating) 
		          FROM
		              movies
		          WHERE
		              release_date = 2023);
		  
		  -- uncorrelated subquery Î°ú Î∞îÍæºÍ≤É.
		  ---- subqeuryÍ∞Å Ïô∏Î∂Ä(outer) ÏøºÎ¶¨Î•º Ï∞∏Ï°∞ÌïòÎèÑÎ°ù Î≥ÄÍ≤ΩÌï®
		  ---- 255,000 * 255,000
		  SELECT 
		      m1.title,
		      m1.director,
		      m1.rating
		  FROM
		      movies AS m1 -- main_movies
		  WHERE
		  	AND m1.title IS NOT NULL
		      AND m1.director IS NOT NULL
		      AND m1.rating IS NOT NULL
		      AND m1.rating > (
		          SELECT
		              AVG(m2.rating) 
		          FROM
		              movies AS m2 -- inner_movies
		          WHERE
		              m2.release_date = m1.release_date); 
		    			-- Í∞ÅÍ∞ÅÏùò Î†àÏΩîÎìúÎ•º ÏàúÏ∞®Ï†ÅÏúºÎ°ú Ï≤òÎ¶¨ÌïòÎ©¥ÏÑú Í≥ÑÏÜçÌï¥ÏÑú Í∞íÏù¥ ÎåÄÏûÖÎê† Í≤ÉÏûÑ.
		              
		              
		  ---- 51*255,000
		  SELECT 
		      m1.title,
		      m1.director,
		      m1.rating
		  FROM
		      movies AS m1 -- main_movies
		  WHERE
		  	release_date > 2022
		  	AND m1.title IS NOT NULL
		      AND m1.director IS NOT NULL
		      AND m1.rating IS NOT NULL
		      AND m1.rating > (
		          SELECT
		              AVG(m2.rating) 
		          FROM
		              movies AS m2 -- inner_movies
		          WHERE
		              m2.release_date = m1.release_date);
		  
		  ----
		  SELECT 
		      m1.title,
		      m1.director,
		      m1.rating,
		      m1.release_date,
		      (
		      SELECT
		          AVG(m2.rating) 
		      FROM
		          movies AS m2 -- inner_movies
		      WHERE 
		          m2.release_date = m1.release_date
		      ) AS year_average
		  FROM
		      movies AS m1 -- main_movies
		  WHERE
		      release_date > 2022
		      AND m1.title IS NOT NULL
		      AND m1.director IS NOT NULL
		      AND m1.rating IS NOT NULL
		      AND m1.rating > (
		          SELECT
		              AVG(m2.rating) 
		          FROM
		              movies AS m2 -- inner_movies
		          WHERE
		              m2.release_date = m1.release_date); 
		  ```
		- ÏøºÎ¶¨Ïùò ÏúÑÏπòÎäî Í∑∏Îã§ÏßÄ Ïã†Í≤ΩÏì∞ÏßÄ ÏïäÏïÑÎèÑ Í¥úÏ∞ÆÎã§. ÏøºÎ¶¨ ÏòµÌã∞ÎßàÏù¥Ï†ÄÍ∞Ä Îçî Ïã§Ìñâ ÎπÑÏö©Ïù¥ Ï†ÄÎ†¥Ìïú ÏÑúÎ∏åÏøºÎ¶¨ Î®ºÏ†Ä Ïã§ÌñâÌï† Í≤ÉÏù¥Í∏∞ ÎïåÎ¨∏Ïù¥Îã§.
	- 5.4 Correlated CTEs
		- Í¥ÑÌò∏ ÎÇ¥Î∂ÄÏùò ÏøºÎ¶¨Í∞Ä Í¥ÑÌò∏ Ïô∏Î∂ÄÏùò Ïó¥Ïùò Í∞íÏùÑ Ï∞∏Ï°∞ÌïòÎ©¥, Í∑∏Í≤å Î∞îÎ°ú correleated subquery
		- correleated subqueryÎ•º ÎßåÎì§Í∏∞ ÏúÑÌï¥ÏÑúÎäî Î©îÏù∏ ÏøºÎ¶¨ÏôÄ ÏÑúÎ∏åÏøºÎ¶¨ÏóêÏÑú Ïì∞Í≥† ÏûàÎäî ÌÖåÏù¥Î∏î ÌïòÎÇò ÎèÑÎäî Ï†ÑÎ∂ÄÏóê Î≥ÑÏπ≠(alias)Î•º Î∂ôÏó¨Ï§òÏïº ÌïúÎã§.
		- Ïù¥ÎÑà Î≥ÑÏπ≠ÏùÑ ÏßÄÏ†ïÌïòÏßÄ ÏïäÏïÑÎèÑ Ï∞∏Ï°∞Í∞Ä Í∞ÄÎä•ÌïòÍ∏¥ ÌïòÏßÄÎßå Í∞ÄÎèÖÏÑ±ÏùÑ ÏúÑÌï¥ÏÑú ÎëòÎã§ ÎÑ£Îäî Í≤ÉÏùÑ ÏÑ†Ìò∏Ìï©ÎãàÎã§Îßå..
		- ÏïÑÎûò ÎÇ¥Ïö©ÏùÑ MySQLÏóêÏÑú Ïã§ÌñâÌïòÎ†§Í≥† ÌïòÎ©¥ ÌûòÎì§Îã§. MySQLÏùÄ CTE ÌïòÏúÑÏóê ÏûàÎäîÍ±∏ Ï∞∏Ï°∞ÌïòÏßÄ Î™ªÌï®. CTE Ï†ïÏùò Ïù¥Ï†ÑÏóê ÏûàÎäî Í≤ÉÎì§Îßå Ï∞∏Ï°∞Ìï† Ïàò ÏûàÎã§.
		- MySQL, PostgreSQL ÎèôÏûëÌïòÏßÄ ÏïäÏßÄÎßå sqliteÏóêÏÑúÎäî ÎèôÏûëÌïúÎã§.
		- ```sql
		  WITH movie_avg_per_cte AS (
		      SELECT
		          AVG(m2.rating) 
		      FROM
		          movies AS m2 -- inner_movies
		      WHERE 
		          m2.release_date = m1.release_date
		  )
		  SELECT 
		      m1.title,
		      m1.director,
		      m1.rating,
		      m1.release_date,
		      (SELECT * FROM movie_avg_per_cte) AS year_average
		  FROM
		      movies AS m1 -- main_movies
		  WHERE
		      release_date > 2022 -- ÏÑúÎ∏åÏøºÎ¶¨Í∞Ä Ïã§ÌñâÌï† ÌñâÏùò Í∞úÏàòÎ•º Ï§ÑÏó¨Ï£ºÍ∏∞ ÏúÑÌï®
		      AND m1.title IS NOT NULL
		      AND m1.director IS NOT NULL
		      AND m1.rating IS NOT NULL
		      AND m1.rating > (
		          SELECT * FROM movie_avg_per_cte);
		  ```
	- 5.5
		- ```sql
		  -- 1. List movies with a rating higher than the average rating of movies
		  -- 		the average rating of movies in their genre
		  
		  WITH genres_avg_rating_cte AS (
		      SELECT
		  --        genres,
		  --        ROUND(AVG(m2.rating), 2) AS avg_rating
		          ROUND(AVG(m2.rating), 2)
		      FROM
		          movies m2
		      WHERE
		          genres IS NOT NULL 
		          AND rating IS NOT NULL 
		          AND m2.genres = m1.genres
		      GROUP BY
		          m2.genres
		  )
		  SELECT
		      m1.title,
		      m1.rating
		  FROM 
		      movies m1
		  WHERE
		      m1.rating IS NOT NULL
		  --    m1.rating > (SELECT avg_rating FROM genres_avg_rating_cte);
		      AND m1.rating > (SELECT * FROM genres_avg_rating_cte);
		  
		  -- ???. ORDER BY ÎÑ£Ïñ¥ÏÑú Îã§Ïãú ÎèåÎ¶¨Î©¥ ÏóÑÏ≤≠ ÎäêÎ†§Ïßê Ïôú? Í∑∏Î†áÍ≤å Ïò§Îûò Í±∏Î¶¥ ÏùºÏù∏Í∞Ä?
		  
		  -- 2. Find the directors with a career revenue  higher than the average revenue of all directors
		  
		  --- Ï≤òÏùå
		  WITH directors_total_revenue_cte AS (
		      SELECT
		          director,
		          SUM(revenue) AS total_revenue
		      FROM 
		          movies
		      WHERE
		          director IS NOT NULL
		          AND revenue IS NOT NULL
		      GROUP BY
		          director
		  ), directors_avg_career_revenue_cte AS (
		      SELECT
		          ROUND(AVG(total_revenue), 2)
		      FROM
		          (SELECT
		              total_revenue
		          FROM
		              directors_total_revenue_cte)
		  )       
		  SELECT
		      director,
		      total_revenue
		  FROM (SELECT
		              *
		          FROM
		              directors_total_revenue_cte)
		  WHERE total_revenue > (SELECT
		                              *
		                          FROM
		                              directors_avg_career_revenue_cte);
		  ---- Î¶¨Ìå©ÌÜ†ÎßÅ
		  WITH directors_total_revenue_cte AS (
		      SELECT
		          director,
		          SUM(revenue) AS total_revenue
		      FROM 
		          movies
		      WHERE
		          director IS NOT NULL
		          AND revenue IS NOT NULL
		      GROUP BY
		          director
		  )
		  SELECT
		      director,
		      total_revenue
		  FROM
		      directors_total_revenue_cte
		  WHERE
		      total_revenue > (
		          SELECT
		              AVG(total_revenue)
		          FROM
		              directors_total_revenue_cte
		      );
		      
		  ---- ÎãàÏΩî
		  WITH directors_revenues AS (
		      SELECT
		          director,
		          SUM(revenue) AS career_revenue
		      FROM 
		          movies
		      WHERE
		          director IS NOT NULL
		          AND revenue IS NOT NULL
		      GROUP BY
		          director
		  )
		  SELECT
		      director,
		      SUM(revenue) AS total_revenue
		  FROM
		      movies
		  WHERE
		      director IS NOT NULL
		      AND revenue IS NOT NULL
		  GROUP BY director
		  HAVING total_revenue > (SELECT AVG(career_revenue) FROM directors_revenues);
		  ```
	- 5.6 Final Practice
		- ```sql
		  -- best_rated_movie
		  -- worst_rated_movie
		  -- most_expensive_movie
		  -- least_expensive_movie
		  WITH director_stats AS (
		      SELECT
		          director,
		          count(*) AS total_movies,
		          avg(rating) AS avg_rating,
		          max(rating) AS best_rating,
		          min(rating) AS worst_rating,
		          max(budget) AS highest_budget,
		          min(budget) AS lowest_budget
		      FROM
		          movies
		      WHERE
		          director IS NOT NULL
		          AND budget IS NOT NULL
		          AND rating IS NOT NULL
		      GROUP BY
		          director
		      HAVING total_movies > 2
		  )
		  SELECT
		      (
		          SELECT
		              title
		          FROM 
		              movies
		          WHERE
		              rating IS NOT NULL AND budget IS NOT NULL
		              AND director = ds.director
		          ORDER BY
		              rating DESC 
		          LIMIT 1
		      ) AS best_rated_movies
		  FROM
		      director_stats AS ds; -- 7.734s, AFTER INDEXING 0.015s
		      
		  CREATE INDEX  idx_director ON movies (director);
		  -- DROP INDEX idx_director
		  ```
- #SQLÎßàÏä§ÌÑ∞ÌÅ¥ÎûòÏä§ 6. INDEXES
- #SQLÎßàÏä§ÌÑ∞ÌÅ¥ÎûòÏä§ 7. MySQL
-